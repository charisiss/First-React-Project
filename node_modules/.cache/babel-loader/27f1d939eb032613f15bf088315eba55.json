{"ast":null,"code":"'use strict';\n\nconst {\n  setInterval\n} = require('node:timers');\n\nconst {\n  Collection\n} = require('@discordjs/collection');\n\nconst APIRequest = require('./APIRequest');\n\nconst routeBuilder = require('./APIRouter');\n\nconst RequestHandler = require('./RequestHandler');\n\nconst {\n  Error\n} = require('../errors');\n\nconst {\n  Endpoints\n} = require('../util/Constants');\n\nclass RESTManager {\n  constructor(client) {\n    this.client = client;\n    this.handlers = new Collection();\n    this.versioned = true;\n    this.globalLimit = client.options.restGlobalRateLimit > 0 ? client.options.restGlobalRateLimit : Infinity;\n    this.globalRemaining = this.globalLimit;\n    this.globalReset = null;\n    this.globalDelay = null;\n\n    if (client.options.restSweepInterval > 0) {\n      this.sweepInterval = setInterval(() => {\n        this.handlers.sweep(handler => handler._inactive);\n      }, client.options.restSweepInterval * 1_000).unref();\n    }\n  }\n\n  get api() {\n    return routeBuilder(this);\n  }\n\n  getAuth() {\n    const token = this.client.token ?? this.client.accessToken;\n    if (token) return `Bot ${token}`;\n    throw new Error('TOKEN_MISSING');\n  }\n\n  get cdn() {\n    return Endpoints.CDN(this.client.options.http.cdn);\n  }\n\n  request(method, url) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const apiRequest = new APIRequest(this, method, url, options);\n    let handler = this.handlers.get(apiRequest.route);\n\n    if (!handler) {\n      handler = new RequestHandler(this);\n      this.handlers.set(apiRequest.route, handler);\n    }\n\n    return handler.push(apiRequest);\n  }\n\n  get endpoint() {\n    return this.client.options.http.api;\n  }\n\n  set endpoint(endpoint) {\n    this.client.options.http.api = endpoint;\n  }\n\n}\n\nmodule.exports = RESTManager;","map":{"version":3,"names":["setInterval","require","Collection","APIRequest","routeBuilder","RequestHandler","Error","Endpoints","RESTManager","constructor","client","handlers","versioned","globalLimit","options","restGlobalRateLimit","Infinity","globalRemaining","globalReset","globalDelay","restSweepInterval","sweepInterval","sweep","handler","_inactive","unref","api","getAuth","token","accessToken","cdn","CDN","http","request","method","url","apiRequest","get","route","set","push","endpoint","module","exports"],"sources":["C:/Users/xsxsam/node_modules/discord.js/src/rest/RESTManager.js"],"sourcesContent":["'use strict';\n\nconst { setInterval } = require('node:timers');\nconst { Collection } = require('@discordjs/collection');\nconst APIRequest = require('./APIRequest');\nconst routeBuilder = require('./APIRouter');\nconst RequestHandler = require('./RequestHandler');\nconst { Error } = require('../errors');\nconst { Endpoints } = require('../util/Constants');\n\nclass RESTManager {\n  constructor(client) {\n    this.client = client;\n    this.handlers = new Collection();\n    this.versioned = true;\n    this.globalLimit = client.options.restGlobalRateLimit > 0 ? client.options.restGlobalRateLimit : Infinity;\n    this.globalRemaining = this.globalLimit;\n    this.globalReset = null;\n    this.globalDelay = null;\n    if (client.options.restSweepInterval > 0) {\n      this.sweepInterval = setInterval(() => {\n        this.handlers.sweep(handler => handler._inactive);\n      }, client.options.restSweepInterval * 1_000).unref();\n    }\n  }\n\n  get api() {\n    return routeBuilder(this);\n  }\n\n  getAuth() {\n    const token = this.client.token ?? this.client.accessToken;\n    if (token) return `Bot ${token}`;\n    throw new Error('TOKEN_MISSING');\n  }\n\n  get cdn() {\n    return Endpoints.CDN(this.client.options.http.cdn);\n  }\n\n  request(method, url, options = {}) {\n    const apiRequest = new APIRequest(this, method, url, options);\n    let handler = this.handlers.get(apiRequest.route);\n\n    if (!handler) {\n      handler = new RequestHandler(this);\n      this.handlers.set(apiRequest.route, handler);\n    }\n\n    return handler.push(apiRequest);\n  }\n\n  get endpoint() {\n    return this.client.options.http.api;\n  }\n\n  set endpoint(endpoint) {\n    this.client.options.http.api = endpoint;\n  }\n}\n\nmodule.exports = RESTManager;\n"],"mappings":"AAAA;;AAEA,MAAM;EAAEA;AAAF,IAAkBC,OAAO,CAAC,aAAD,CAA/B;;AACA,MAAM;EAAEC;AAAF,IAAiBD,OAAO,CAAC,uBAAD,CAA9B;;AACA,MAAME,UAAU,GAAGF,OAAO,CAAC,cAAD,CAA1B;;AACA,MAAMG,YAAY,GAAGH,OAAO,CAAC,aAAD,CAA5B;;AACA,MAAMI,cAAc,GAAGJ,OAAO,CAAC,kBAAD,CAA9B;;AACA,MAAM;EAAEK;AAAF,IAAYL,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAM;EAAEM;AAAF,IAAgBN,OAAO,CAAC,mBAAD,CAA7B;;AAEA,MAAMO,WAAN,CAAkB;EAChBC,WAAW,CAACC,MAAD,EAAS;IAClB,KAAKA,MAAL,GAAcA,MAAd;IACA,KAAKC,QAAL,GAAgB,IAAIT,UAAJ,EAAhB;IACA,KAAKU,SAAL,GAAiB,IAAjB;IACA,KAAKC,WAAL,GAAmBH,MAAM,CAACI,OAAP,CAAeC,mBAAf,GAAqC,CAArC,GAAyCL,MAAM,CAACI,OAAP,CAAeC,mBAAxD,GAA8EC,QAAjG;IACA,KAAKC,eAAL,GAAuB,KAAKJ,WAA5B;IACA,KAAKK,WAAL,GAAmB,IAAnB;IACA,KAAKC,WAAL,GAAmB,IAAnB;;IACA,IAAIT,MAAM,CAACI,OAAP,CAAeM,iBAAf,GAAmC,CAAvC,EAA0C;MACxC,KAAKC,aAAL,GAAqBrB,WAAW,CAAC,MAAM;QACrC,KAAKW,QAAL,CAAcW,KAAd,CAAoBC,OAAO,IAAIA,OAAO,CAACC,SAAvC;MACD,CAF+B,EAE7Bd,MAAM,CAACI,OAAP,CAAeM,iBAAf,GAAmC,KAFN,CAAX,CAEwBK,KAFxB,EAArB;IAGD;EACF;;EAEM,IAAHC,GAAG,GAAG;IACR,OAAOtB,YAAY,CAAC,IAAD,CAAnB;EACD;;EAEDuB,OAAO,GAAG;IACR,MAAMC,KAAK,GAAG,KAAKlB,MAAL,CAAYkB,KAAZ,IAAqB,KAAKlB,MAAL,CAAYmB,WAA/C;IACA,IAAID,KAAJ,EAAW,OAAQ,OAAMA,KAAM,EAApB;IACX,MAAM,IAAItB,KAAJ,CAAU,eAAV,CAAN;EACD;;EAEM,IAAHwB,GAAG,GAAG;IACR,OAAOvB,SAAS,CAACwB,GAAV,CAAc,KAAKrB,MAAL,CAAYI,OAAZ,CAAoBkB,IAApB,CAAyBF,GAAvC,CAAP;EACD;;EAEDG,OAAO,CAACC,MAAD,EAASC,GAAT,EAA4B;IAAA,IAAdrB,OAAc,uEAAJ,EAAI;IACjC,MAAMsB,UAAU,GAAG,IAAIjC,UAAJ,CAAe,IAAf,EAAqB+B,MAArB,EAA6BC,GAA7B,EAAkCrB,OAAlC,CAAnB;IACA,IAAIS,OAAO,GAAG,KAAKZ,QAAL,CAAc0B,GAAd,CAAkBD,UAAU,CAACE,KAA7B,CAAd;;IAEA,IAAI,CAACf,OAAL,EAAc;MACZA,OAAO,GAAG,IAAIlB,cAAJ,CAAmB,IAAnB,CAAV;MACA,KAAKM,QAAL,CAAc4B,GAAd,CAAkBH,UAAU,CAACE,KAA7B,EAAoCf,OAApC;IACD;;IAED,OAAOA,OAAO,CAACiB,IAAR,CAAaJ,UAAb,CAAP;EACD;;EAEW,IAARK,QAAQ,GAAG;IACb,OAAO,KAAK/B,MAAL,CAAYI,OAAZ,CAAoBkB,IAApB,CAAyBN,GAAhC;EACD;;EAEW,IAARe,QAAQ,CAACA,QAAD,EAAW;IACrB,KAAK/B,MAAL,CAAYI,OAAZ,CAAoBkB,IAApB,CAAyBN,GAAzB,GAA+Be,QAA/B;EACD;;AAhDe;;AAmDlBC,MAAM,CAACC,OAAP,GAAiBnC,WAAjB"},"metadata":{},"sourceType":"script"}