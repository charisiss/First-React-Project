{"ast":null,"code":"'use strict';\n\nlet erlpack;\n\nconst {\n  Buffer\n} = require('node:buffer');\n\ntry {\n  erlpack = require('erlpack');\n  if (!erlpack.pack) erlpack = null;\n} catch {} // eslint-disable-line no-empty\n\n\nexports.WebSocket = require('ws');\nconst ab = new TextDecoder();\nexports.encoding = erlpack ? 'etf' : 'json';\nexports.pack = erlpack ? erlpack.pack : JSON.stringify;\n\nexports.unpack = (data, type) => {\n  if (exports.encoding === 'json' || type === 'json') {\n    if (typeof data !== 'string') {\n      data = ab.decode(data);\n    }\n\n    return JSON.parse(data);\n  }\n\n  if (!Buffer.isBuffer(data)) data = Buffer.from(new Uint8Array(data));\n  return erlpack.unpack(data);\n};\n\nexports.create = function (gateway) {\n  let query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const [g, q] = gateway.split('?');\n  query.encoding = exports.encoding;\n  query = new URLSearchParams(query);\n  if (q) new URLSearchParams(q).forEach((v, k) => query.set(k, v));\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  const ws = new exports.WebSocket(`${g}?${query}`, ...args);\n  return ws;\n};\n\nfor (const state of ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED']) exports[state] = exports.WebSocket[state];","map":{"version":3,"names":["erlpack","Buffer","require","pack","exports","WebSocket","ab","TextDecoder","encoding","JSON","stringify","unpack","data","type","decode","parse","isBuffer","from","Uint8Array","create","gateway","query","g","q","split","URLSearchParams","forEach","v","k","set","args","ws","state"],"sources":["C:/Users/xsxsam/node_modules/discord.js/src/WebSocket.js"],"sourcesContent":["'use strict';\n\nlet erlpack;\nconst { Buffer } = require('node:buffer');\n\ntry {\n  erlpack = require('erlpack');\n  if (!erlpack.pack) erlpack = null;\n} catch {} // eslint-disable-line no-empty\n\nexports.WebSocket = require('ws');\n\nconst ab = new TextDecoder();\n\nexports.encoding = erlpack ? 'etf' : 'json';\n\nexports.pack = erlpack ? erlpack.pack : JSON.stringify;\n\nexports.unpack = (data, type) => {\n  if (exports.encoding === 'json' || type === 'json') {\n    if (typeof data !== 'string') {\n      data = ab.decode(data);\n    }\n    return JSON.parse(data);\n  }\n  if (!Buffer.isBuffer(data)) data = Buffer.from(new Uint8Array(data));\n  return erlpack.unpack(data);\n};\n\nexports.create = (gateway, query = {}, ...args) => {\n  const [g, q] = gateway.split('?');\n  query.encoding = exports.encoding;\n  query = new URLSearchParams(query);\n  if (q) new URLSearchParams(q).forEach((v, k) => query.set(k, v));\n  const ws = new exports.WebSocket(`${g}?${query}`, ...args);\n  return ws;\n};\n\nfor (const state of ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED']) exports[state] = exports.WebSocket[state];\n"],"mappings":"AAAA;;AAEA,IAAIA,OAAJ;;AACA,MAAM;EAAEC;AAAF,IAAaC,OAAO,CAAC,aAAD,CAA1B;;AAEA,IAAI;EACFF,OAAO,GAAGE,OAAO,CAAC,SAAD,CAAjB;EACA,IAAI,CAACF,OAAO,CAACG,IAAb,EAAmBH,OAAO,GAAG,IAAV;AACpB,CAHD,CAGE,MAAM,CAAE,C,CAAC;;;AAEXI,OAAO,CAACC,SAAR,GAAoBH,OAAO,CAAC,IAAD,CAA3B;AAEA,MAAMI,EAAE,GAAG,IAAIC,WAAJ,EAAX;AAEAH,OAAO,CAACI,QAAR,GAAmBR,OAAO,GAAG,KAAH,GAAW,MAArC;AAEAI,OAAO,CAACD,IAAR,GAAeH,OAAO,GAAGA,OAAO,CAACG,IAAX,GAAkBM,IAAI,CAACC,SAA7C;;AAEAN,OAAO,CAACO,MAAR,GAAiB,CAACC,IAAD,EAAOC,IAAP,KAAgB;EAC/B,IAAIT,OAAO,CAACI,QAAR,KAAqB,MAArB,IAA+BK,IAAI,KAAK,MAA5C,EAAoD;IAClD,IAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8B;MAC5BA,IAAI,GAAGN,EAAE,CAACQ,MAAH,CAAUF,IAAV,CAAP;IACD;;IACD,OAAOH,IAAI,CAACM,KAAL,CAAWH,IAAX,CAAP;EACD;;EACD,IAAI,CAACX,MAAM,CAACe,QAAP,CAAgBJ,IAAhB,CAAL,EAA4BA,IAAI,GAAGX,MAAM,CAACgB,IAAP,CAAY,IAAIC,UAAJ,CAAeN,IAAf,CAAZ,CAAP;EAC5B,OAAOZ,OAAO,CAACW,MAAR,CAAeC,IAAf,CAAP;AACD,CATD;;AAWAR,OAAO,CAACe,MAAR,GAAiB,UAACC,OAAD,EAAkC;EAAA,IAAxBC,KAAwB,uEAAhB,EAAgB;EACjD,MAAM,CAACC,CAAD,EAAIC,CAAJ,IAASH,OAAO,CAACI,KAAR,CAAc,GAAd,CAAf;EACAH,KAAK,CAACb,QAAN,GAAiBJ,OAAO,CAACI,QAAzB;EACAa,KAAK,GAAG,IAAII,eAAJ,CAAoBJ,KAApB,CAAR;EACA,IAAIE,CAAJ,EAAO,IAAIE,eAAJ,CAAoBF,CAApB,EAAuBG,OAAvB,CAA+B,CAACC,CAAD,EAAIC,CAAJ,KAAUP,KAAK,CAACQ,GAAN,CAAUD,CAAV,EAAaD,CAAb,CAAzC;;EAJ0C,kCAATG,IAAS;IAATA,IAAS;EAAA;;EAKjD,MAAMC,EAAE,GAAG,IAAI3B,OAAO,CAACC,SAAZ,CAAuB,GAAEiB,CAAE,IAAGD,KAAM,EAApC,EAAuC,GAAGS,IAA1C,CAAX;EACA,OAAOC,EAAP;AACD,CAPD;;AASA,KAAK,MAAMC,KAAX,IAAoB,CAAC,YAAD,EAAe,MAAf,EAAuB,SAAvB,EAAkC,QAAlC,CAApB,EAAiE5B,OAAO,CAAC4B,KAAD,CAAP,GAAiB5B,OAAO,CAACC,SAAR,CAAkB2B,KAAlB,CAAjB"},"metadata":{},"sourceType":"script"}